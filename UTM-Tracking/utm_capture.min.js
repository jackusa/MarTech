/*
 * Copyright (c) 2018, Yanir Calisar (ycalisar at overstack.io)
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this code and associated documentation files, to deal in the code without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the code.
 * The user assumes responsibility for determining appropriate use of the code, for consequences of its use, and for checking functionality against other reliable sources.
 * We suggest citation in publications as with any code developement work. No warrantee is given.
 * Please help improve the code by sending suggestions or new code back.
 */


!function(){var e={cookieNamePrefix:"__lt_",cookieCumulativePrefix:"__cu_",cookieNameFirstTouchPrefix:"__ft_",utmParams:["utm_source","utm_medium","utm_campaign","utm_term","utm_content"],cookieExpiryDays:365,createCookie:function(e,r,t){if(t){var o=new Date;o.setTime(o.getTime()+24*t*60*60*1e3);var i="; expires="+o.toGMTString()}else i="";document.cookie=this.cookieNamePrefix+e+"="+r+i+";domain=."+function(){var e,r,t="top_level_domain=cookie",o=document.location.hostname.split(".");for(e=o.length-1;e>=0;e--)if(r=o.slice(e).join("."),document.cookie=t+";domain=."+r+";",document.cookie.indexOf(t)>-1)return document.cookie=t.split("=")[0]+"=;domain=."+r+";expires=Thu, 01 Jan 1970 00:00:01 GMT;",r;return document.location.protocol+"//"+document.location.host}()+";  path=/",this.createLS(e,r)},createLS:function(e,r){localStorage[this.cookieNamePrefix+e]=r},readCookie:function(e){for(var r=this.cookieNamePrefix+e+"=",t=document.cookie.split(";"),o=0;o<t.length;o++){for(var i=t[o];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(r))return i.substring(r.length,i.length)}this.readLS(e),this.readLS(e)},readLS:function(e){var r=localStorage[this.cookieNamePrefix+e];return void 0==r?null:r},checkIfFirstTouch:function(){for(var e=this.cookieNameFirstTouchPrefix+"utm_source=",r=document.cookie.split(";"),t=0;t<r.length;t++){for(var o=r[t];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(e))return o.substring(e.length,o.length)}this.readLS(this.cookieNameFirstTouchPrefix+"utm_source"),this.readLS(this.cookieNameFirstTouchPrefix+"utm_source")},eraseCookie:function(e){this.createCookie(e,"",-1),delete localStorage[e]},getParameterByName:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.search);return null==r?"":decodeURIComponent(r[1].replace(/\+/g," "))},utmPresentInUrl:function(){for(var e=!1,r=0;r<this.utmParams.length;r++){var t=this.utmParams[r],o=this.getParameterByName(t);""!=o&&void 0!=o&&(e=!0)}return e},writeUtmCookieFromParams:function(){for(var e=0;e<this.utmParams.length;e++){var r=this.utmParams[e],t=this.getParameterByName(r);this.createCookie(r,t,this.cookieExpiryDays),localStorage[r]=t}},writeCookieOnce:function(e,r){this.readCookie(e)||this.createCookie(e,r,this.cookieExpiryDays),null==this.readLS(e)&&this.createLS(e,r)},writeReferrerOnce:function(){var e=document.referrer;""===e||void 0===e?this.writeCookieOnce("referrer","direct"):this.writeCookieOnce("referrer",e)},referrer:function(){return this.readCookie("referrer")}};e.checkIfFirstTouch()||(e.cookieNamePrefix=e.cookieNameFirstTouchPrefix,e.writeReferrerOnce(),e.utmPresentInUrl()&&e.writeUtmCookieFromParams(),e.cookieNamePrefix="__lt_"),e.writeReferrerOnce(),e.utmPresentInUrl()&&e.writeUtmCookieFromParams()}();